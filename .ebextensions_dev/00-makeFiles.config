files:
    "/sbin/appstart":
        mode: "000755"
        owner: webapp
        group: webapp
        content: |
            #!/usr/bin/env bash
            JAR_PATH=/var/app/current/application.jar

            # 로그 디렉토리 지정
            LOG_DIR=/var/app/current/logs

            # 경로 없으면 생성, 실행 주체가 해당 디엑토리에 쓸 수 있도록 권한 부여
            mkdir -p "$LOG_DIR"
            chown -R webapp:webapp "$LOG_DIR"

            # run app
            killalljava
            java \
              -Dfile.encoding=UTF-8 \
              -Dspring.profiles.active=develop \
              -DLOG_HOME="$LOG_DIR" \
              -jar "$JAR_PATH"